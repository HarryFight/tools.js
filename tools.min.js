function addEvent(target,eventName,fn){var fnStr=fn.toString().replace(/\s+/g,"");target[eventName+"event"]=target[eventName+"event"]?target[eventName+"event"]:{};target[eventName+"event"][fnStr]=handler;if(target.addEventListener){target.addEventListener(eventName,handler,false);}else if(target.attachEvent){target.attachEvent("on"+eventName,handler);}else{target["on"+eventName]=handler;}
function handler(ev){var event=ev||window.event,stopPropagation=event.stopPropagation,preventDefault=event.preventDefault;event.target=event.target||event.srcElement;event.currentTarget=event.currentTarget||target;event.stopPropagation=function(){if(!event.stopPropagation){event.cancelBubble=true;}else{stopPropagation.call(event);}};event.preventDefault=function(){if(!event.preventDefault){event.returnValue=false;}else{preventDefault.call(event);}}
var flag=fn.call(target,event);if(flag===false){event.stopPropagation();event.preventDefault();}}}
function removeEvent(target,eventName,fn){var fnStr=fn.toString().replace(/\s+/g,""),handler;if(target[eventName+"event"]){handler=target[eventName+"event"][fnStr];}else{return;}
if(target.removeEventListener){target.removeEventListener(eventName,handler,false);}else if(target.detachEvent){target.detachEvent("on"+eventName,handler);}else{target["on"+eventName]=null;}}
function removeAll(target,eventName){if(target[eventName+"event"]){var all=target[eventName+"event"];for(var key in all){if(all.hasOwnProperty(key)){removeEvent(target,eventName,key);}}}}
function live(target,delegate,eventName,fn){addEvent(target,eventName,handler);function handler(ev){var target=ev.target;var item=delegate;for(var i=0,len=item.length;i<len;i++){if(target==item[i]){return fn.call(target,ev);}}}}
function focus(target,fn){if(target.addEventListener){target.addEventListener("focus",fn,true);}else if(target.attachEvent){target.attachEvent("onfocusin",fn);}}
function blur(target,fn){if(target.addEventListener){target.addEventListener("blur",fn,true);}else if(target.attachEvent){target.attachEvent("onfocusout",fn);}}
function mouseenter(target,fn){if(target.addEventListener){addEvent(target,"mouseover",handler);}else if(target.attachEvent){addEvent(target,"mouseenter",fn)}
function handler(ev){var target=ev.target,fromElem=ev.relatedTarget;if(fromElem.contains(target)&&this==target){return fn.call(target,ev);}}}
function mouseout(target,fn){if(target.addEventListener){addEvent(target,"mouseout",handler);}else if(target.attachEvent){addEvent(target,"mouseleave",fn);}
function handler(ev){var target=ev.target,fromEle=ev.relatedTarget;if(fromEle.contains(target)&&this==target){return fn.call(target,ev);}}}
function constant(target,json,time,callback){var timeScale=1000/60,time=time||1000,scale=time/timeScale,begin,speed;if(target.timer){clearInterval(target.timer);}
for(var key in json){begin=parseFloat(window.getComputedStyle(target,null)[key]);speed=(json[key]-begin)/scale;target[key]=speed;}
target.timer=setInterval(function(){var stop=true;for(var key in json){var newValue,oldValue;oldValue=parseFloat(window.getComputedStyle(target,null)[key]);newValue=oldValue+target[key];if(Math.abs(newValue-json[key])<1){target.style[key]=json[key]+"px";continue;}else{stop=false;}
target.style[key]=newValue+"px";}
if(stop){clearInterval(target.timer);if(typeof callback=="function"){callback();}}},timeScale);}
function decelerate(target,json,scale,callback){var timeScale=1000/60,scale=scale||20;if(target.timer){clearInterval(target.timer);}
target.timer=setInterval(function(){var stop=true;for(var key in json){var oldValue,newValue,speed;oldValue=parseFloat(window.getComputedStyle(target,null)[key]);speed=(json[key]-oldValue)/scale;newValue=oldValue+speed;if(Math.abs(newValue-json[key])<1){target.style[key]=json[key]+"px";continue;}else{stop=false;}
target.style[key]=newValue+"px";}
if(stop){clearInterval(target.timer);if(typeof callback=="function"){callback();}}},timeScale);}
function accelerate(target,json,scale,callback){var timeScale=1000/60,scale=scale||20,begin,speed;for(var key in json){begin=parseFloat(window.getComputedStyle(target,null)[key]);target[key]=(json[key]-begin)/scale;}
if(target.timer){clearInterval(target.timer)}
target.timer=setInterval(function(){var stop=true;for(var key in json){var oldValue,newValue;oldValue=parseFloat(window.getComputedStyle(target,null)[key]);speed=target[key]-(json[key]-oldValue)/scale;if(!speed){speed=(oldValue-json[key])<0?5:-5;}
if(Math.abs(oldValue-json[key])<1||(target[key]-speed)<5){target.style[key]=json[key]+"px";continue;}else{stop=false;}
newValue=oldValue+speed;target.style[key]=newValue+"px";}
if(stop){clearInterval(target.timer);if(typeof callback=="function"){callback();}}},1000/60)}
function dap(target,json,scale,callback){var timeScale=1000/60,scale=scale||20;for(var key in json){target[key]=0;}
target.timer=setInterval(function(){var stop=true;for(var key in json){var speed,oldValue,newValue;oldValue=parseFloat(window.getComputedStyle(target,null)[key]);target[key]=target[key]+(json[key]-oldValue)/scale;target[key]*=0.7;speed=target[key];if(Math.abs(oldValue-json[key])<10e-1){target.style[key]=json[key]+"px";continue;}else{stop=false;}
newValue=oldValue+speed;target.style[key]=newValue+"px";}
if(stop){clearInterval(target.timer);if(typeof callback=="function"){callback();}}},timeScale)}
function toLayout(parent,child){var pos=[],len=child.length;parent.style.position="relative";for(var i=0;i<len;i++){var top=child[i].offsetTop,left=child[i].offsetLeft;pos.push({top:top,left:left});}
for(var i=0;i<len;i++){var item=child[i];item.style.position="absolute";item.style.top=pos[i].top+"px";item.style.left=pos[i].left+"px";item.style.margin="0px";}
return pos;}
function hitTest(obj1,obj2){var t1=obj1.offsetTop,t2=obj2.offsetTop,h1=obj1.offsetHeight,h2=obj2.offsetHeight,l1=obj1.offsetLeft,l2=obj2.offsetLeft,w1=obj1.offsetWidth,w2=obj2.offsetWidth;if(!(t1+h1<t2||t2+h2<t1||l1+w1<l2||l2+w2<l1)){return true;}else{return false;}}
function is(obj,type){return Object.prototype.toString.call(obj)=="[object"+type+"]";}
function toArray(obj){var temp=[],len=obj.length;if(is(obj,"NodeList")||(obj[0]&&obj.length)){for(var i=0;i<len;i++){temp.push(obj[i]);}}else{temp=[obj];}
return temp;}
function each(arr,fn){if([].forEach){arr.forEach(fn);}else{for(var i=0,len=arr.length;i<len;i++){fn.apply(arr,[arr[i],i,arr]);}}}
function getRandom(Max,len){var temp=[];while(temp.length<len){var flag=true;var r=Math.ceil(Math.random()*Max);for(var i=0;i<temp.length;i++){if(temp[i]==r){flag=false;}else{flag=true;}}
if(flag){temp[temp.length]=r;}}
return temp;}